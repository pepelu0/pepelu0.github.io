---
layout: post
title: 分布式环境中的时钟与同步
author: pepelu
date: 2018-12-03
tags:
    - 分布式
---
# 前言

# 人们怎么计时？
在讨论这些问题之前，让我们先来看看现实世界中人们是怎么计量时间的。时间的感知来自于周期现象。以下，我们来看一看现实世界中的一些计量时间的方法。

* 农历年

  中国的古人们通过河水泛滥，草木枯荣，鸟兽迁徙，寒暖交替等等自然现象判断季节。这些自然现象统称为"物候"，在这基础上，人们逐渐形成了"年"的概念。

* 月份

  月亮的出落，以及它的圆缺变化是人类最早认识的天象之一。每月初一、三十，完全看不到月亮，这就是“朔”。十五前后月亮最圆，称为“望”。人们注意到朔、望变化具有相当准确的周期，由此产生了朔、望月概念。所谓朔、望月，约等于29--30天。朔望月的出现是人类继“日”之后认识的又一个时间周期，从原始计时单位“日”发展到更长的时间单位“月”，标志着人类对于时间的认识和测量又向前迈进了一步。现代观测表明，较为准确的朔望月长度约为29.5306天。请记住这个数字，它是阴历中区分大小月的依据。

* 公历年

  现在世界通用的历法是格里历，又叫做公历。公历是怎么来的?它是在古罗马历法基础上发展起来的，而古罗马历法又是从埃及继承过来的。

  儒略历把一年的长度取为365.25天，同精确的回归年长度(365．2422)天相差0．0078天。这个差数虽然很小，十年、八年中间不大容易反映出来，但成百上千年地累积下去就很可观了。简单的数学计算可知，经过128年，儒略历就会超前回归年一整天。

  格里历的编排方法是：取一年长度为356.25天，一年分成12个月，大约31天，小月30天，2月份为28天。它设置闰年：每4年1闰，闰年时2月份为29天，但每逢百年且能被400整除时，才作为闰年。格里历与儒略历衔接得很好，它提供了一个既具有必不可少的精度，又具有人们所希望的简单易行的优点，为世界上越来越多的国家所接受，以致变成现在世界通用的所谓“公历”。

* 秒的定义：太阳秒与原子秒

  太阳达到天空中它出现的最高点时称为`中天（transit of the sun）`，两次连续的`中天`之间的时间称为一个`太阳日（solar day）`，因为每天有24小时，每小时有3600s，所以一个`太阳秒（solar second）`被精确的定义为1/86400个`太阳日`。它规定一个平太阳日的86400分之一为1秒，即天文秒。但人们后来发现，地球自转速率并不均匀，它的精确程度约3年差一秒。经过长期观测修改后产生了运行更均匀的历书时，其精确度是30年差一秒。

  1967年第十三届国际计量大会通过新的原子秒的定义：“秒是以铯-l33，原子基态的两个超精细能级间跃迁辐射的9,192,631,770个周期的持续时间。”原子时的时刻起点为l958年1月1日0时。

  国际原子时间（TAI）的稳定性是由分布于世界各地、隶属于几十多个国家的数十家实验室的原子钟定期比对来保证的。这些原子钟的比对是通过罗兰-C系统、GPS系统、卫星双向系统进行的。比对的不确定度根据比对方法的不同而不同，但都小于0.1微秒。

*

# 逻辑时钟

* 

# GPS
# 参考资料
* [中国数字科技馆](http://amuseum.cdstm.cn/AMuseum/time/index.html)
* 《Distributed Systems》Version 3.01 by Andrew S. Tanenbaum and Maarten van Steen
